<!DOCTYPE html>
<html>
<head>
<title>OTP Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family: Arial;
  background:#f2f2f2;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.box{
  background:#fff;
  padding:20px;
  width:300px;
  border-radius:8px;
  text-align:center;
  box-shadow:0 0 10px #aaa;
}

input,button{
  width:100%;
  padding:10px;
  margin:8px 0;
}

button{
  background:green;
  color:white;
  border:none;
  cursor:pointer;
}

#recaptcha{
  margin:10px 0;
}
</style>
</head>

<body>

<div class="box">

<h3>Mobile OTP Login</h3>

<input type="tel" id="phone" placeholder="+91XXXXXXXXXX">

<div id="recaptcha"></div>

<button onclick="sendOTP()">Send OTP</button>

<br>

<input type="text" id="otp" placeholder="Enter OTP">

<button onclick="verifyOTP()">Verify OTP</button>

<p id="msg"></p>

</div>


<!-- Firebase -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import {
  getAuth,
  RecaptchaVerifier,
  signInWithPhoneNumber
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";


// üî¥ Apna Firebase Config Yahan Paste Karo
const firebaseConfig = {
  apiKey: "AIzaSyA8O4kOinBczBQ8r9mbtOdH98X70ezpgYk",
  authDomain: "new-prototype-s7zo4.firebaseapp.com",
  projectId: "new-prototype-s7zo4",
  storageBucket: "new-prototype-s7zo4.firebasestorage.app",
  messagingSenderId: "406938721232",
  appId: "1:406938721232:web:bee564c397a8c9355af7d5"
};


const app = initializeApp(firebaseConfig);
const auth = getAuth(app);


// Recaptcha
window.recaptchaVerifier = new RecaptchaVerifier(
  auth,
  "recaptcha",
  { size: "normal" }
);


// Send OTP
window.sendOTP = function(){

  let phone = document.getElementById("phone").value;

  signInWithPhoneNumber(auth, phone, window.recaptchaVerifier)
  .then((result)=>{

    window.confirmationResult = result;
    document.getElementById("msg").innerHTML="OTP Sent ‚úÖ";

  }).catch((err)=>{

    document.getElementById("msg").innerHTML=err.message;
  });

}


// Verify OTP
window.verifyOTP = function(){

  let code = document.getElementById("otp").value;

  confirmationResult.confirm(code)
  .then(()=>{

    alert("Login Success!");
    window.location="index.html";

  }).catch(()=>{

    document.getElementById("msg").innerHTML="Wrong OTP ‚ùå";
  });

}

</script>

</body>
</html>
